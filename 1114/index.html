<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ—ç¾å¿ç”Ÿå‘½æ•™è‚²ç¶“çµ¡å­¸ - äº’å‹•å¼å¥åº·å„€è¡¨æ¿ (v1.0.4)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Custom Scrollbar for the list */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #10b981; /* Emerald-500 */
            border-radius: 4px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #059669; /* Emerald-600 */
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.4s ease-out forwards;
        }
        
        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-slide-down {
            animation: slideDown 0.5s ease-out forwards;
        }
        
        /* Progress bar animation */
        .progress-fill {
            transition: width 2s ease-in-out;
        }
    </style>
</head>
<body class="bg-stone-50 text-stone-800 font-sans antialiased">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- Icons (Inline SVGs) ---
        const IconBase = ({ children, className }) => (
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );

        const Maximize = ({ className }) => <IconBase className={className}><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></IconBase>;
        const Minimize = ({ className }) => <IconBase className={className}><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></IconBase>;
        const Activity = ({ className }) => <IconBase className={className}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></IconBase>;
        const Moon = ({ className }) => <IconBase className={className}><path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/></IconBase>;
        const Sun = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></IconBase>;
        const Info = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></IconBase>;
        const PlayCircle = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8"/></IconBase>;
        const PlaySolid = ({ className }) => <IconBase className={className}><polygon points="5 3 19 12 5 21 5 3" fill="currentColor" stroke="none"/></IconBase>;
        const Calculator = ({ className }) => <IconBase className={className}><rect width="16" height="20" x="4" y="2" rx="2"/><line x1="8" x2="16" y1="6" y2="6"/><line x1="16" x2="16" y1="14" y2="18"/><path d="M16 10h.01"/><path d="M12 10h.01"/><path d="M8 10h.01"/><path d="M12 14h.01"/><path d="M8 14h.01"/><path d="M12 18h.01"/><path d="M8 18h.01"/></IconBase>;
        const MapPin = ({ className }) => <IconBase className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/></IconBase>;
        const BookOpen = ({ className }) => <IconBase className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/></IconBase>;
        const ExternalLink = ({ className }) => <IconBase className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></IconBase>;
        const Leaf = ({ className }) => <IconBase className={className}><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 6.5-2 11l-5 7"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></IconBase>;
        const AlertCircle = ({ className }) => <IconBase className={className}><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y2="16"/></IconBase>;

        // --- Data & Constants ---
        const VERSION = "1.0.4";
        const VIDEO_ID = "oPnyn912Ij4";
        const VIDEO_URL = `https://www.youtube.com/watch?v=${VIDEO_ID}`;
        const VIDEO_THUMBNAIL = `https://img.youtube.com/vi/${VIDEO_ID}/maxresdefault.jpg`;

        // Merged Acupoints (Original + New from æ¸¬01.html)
        const ACUPOINTS = [
            { id: 'fenglong', name: 'è±éš†ç©´', meridian: 'èƒƒç¶“', description: 'ä½åœ¨å°è…¿å‰å¤–å´ï¼Œå¤–è¸å°–ä¸Š8å¯¸ï¼Œæ¢å£ç©´å¤–1å¯¸ã€‚', function: 'ç¥›æ¿•åŒ–ç—°ä¹‹è¦ç©´ã€‚', videoContext: 'é‡å°ã€Œè„¾æ¿•ã€é«”è³ªï¼Œè‹¥å°è…¿è„›éª¨æ—é’ç­‹æµ®èµ·æ˜é¡¯ï¼Œå¯èƒ½ä»£è¡¨èƒƒéƒ¨ç‹€æ³ä¸ä½³ã€‚' },
            { id: 'neiting', name: 'å…§åº­ç©´', meridian: 'èƒƒç¶“', description: 'è¶³èƒŒç¬¬2ã€3è¶¾é–“ï¼Œè¶¾è¹¼ç·£å¾Œæ–¹èµ¤ç™½è‚‰éš›è™•ã€‚', function: 'æ¸…èƒƒç†±ï¼Œæ­¢ç—›ã€‚', videoContext: 'å®¹æ˜“è„¹æ°£è€…å¯å¤šæŒ‰å£“æ­¤ç©´ï¼Œèƒ½å¿«é€Ÿç·©è§£èƒƒéƒ¨è„¹æ°£ä¸é©ã€‚' },
            { id: 'dadun', name: 'å¤§æ•¦ç©´', meridian: 'è‚ç¶“ (äº•ç©´)', description: 'è¶³å¤§è¶¾å¤–å´ï¼Œè·æŒ‡ç”²è§’0.1å¯¸ã€‚', function: 'ä¸»æ²»é ­ç—›ã€çœ©æšˆã€æœˆç¶“ä¸èª¿ã€ç™²ç™‡ã€‚', videoContext: 'è‚ç¶“äº•ç©´ï¼Œå°æ–¼æ€¥æ•‘æˆ–ç–é€šè‚æ°£æœ‰å¹«åŠ©ã€‚' },
            { id: 'xingjian', name: 'è¡Œé–“ç©´', meridian: 'è‚ç¶“ (æ»ç©´)', description: 'è¶³èƒŒç¬¬ä¸€ã€äºŒè¶¾é–“ç¸«ç´‹ç«¯ã€‚', function: 'ä¸»æ²»é ­ç—›ã€çœ©æšˆã€ç›®èµ¤è…«ç—›ã€æœˆç¶“éå¤šã€‚', videoContext: 'æ¸…æ³„è‚ç«çš„è¦ç©´ã€‚' },
            { id: 'taichong', name: 'å¤ªè¡ç©´', meridian: 'è‚ç¶“ (åŸç©´)', description: 'è¶³èƒŒç¬¬ä¸€ã€äºŒè·–éª¨çµåˆéƒ¨å‰æ–¹å‡¹é™·ã€‚', function: 'å¹³è‚ç†„é¢¨ï¼Œä¸»æ²»é«˜è¡€å£“ã€æƒ…ç·’æ€¥èºã€‚', videoContext: 'è‚ç¶“åŸç©´ï¼Œæ˜¯ç–è‚ç†æ°£æœ€é‡è¦çš„ç©´ä½ä¹‹ä¸€ã€‚' },
            { id: 'zhongfeng', name: 'ä¸­å°ç©´', meridian: 'è‚ç¶“ (ç¶“ç©´)', description: 'è¶³å…§è¸å‰1å¯¸ï¼Œè„›éª¨å‰è‚Œè…±å…§å´ã€‚', function: 'ä¸»æ²»è…¹ç—›ã€ç–æ°£ã€å°ä¾¿ä¸åˆ©ã€‚', videoContext: 'ä¿é¤Šæ³Œå°¿ç³»çµ±èˆ‡ä¸‹è…¹éƒ¨çš„ç©´ä½ã€‚' },
            { id: 'ligou', name: 'è ¡æºç©´', meridian: 'è‚ç¶“ (çµ¡ç©´)', description: 'è¶³å…§è¸å°–ä¸Š5å¯¸ï¼Œè„›éª¨å…§å´é¢ä¸­å¤®ã€‚', function: 'ä¸»æ²»æœˆç¶“ä¸èª¿ã€å°ä¾¿ä¸åˆ©ã€ç–æ°£ã€‚', videoContext: 'è‚ç¶“çµ¡ç©´ï¼Œæºé€šè‚è†½å…©ç¶“ã€‚' },
            { id: 'qichong', name: 'æ°£æ²–ç©´', meridian: 'èƒƒç¶“', description: 'è…¹è‚¡æºç¨ä¸Šæ–¹ï¼Œç•¶è‡ä¸­ä¸‹5å¯¸ï¼Œè·å‰æ­£ä¸­ç·š2å¯¸ã€‚', function: 'èª¿ç†æ°£è¡€ï¼Œèˆ’ç·©è…¿éƒ¨ã€‚', videoContext: 'é«”åŠ›ä¸ä½³è€…å¯æŒ‰å£“ï¼ŒæŒ‰å£“æ™‚æœƒæœ‰ç†±æ„Ÿå‚³å°è‡³è†è“‹ã€‚' },
            { id: 'chongmen', name: 'æ²–é–€ç©´', meridian: 'è„¾ç¶“', description: 'è…¹è‚¡æºå¤–å´ï¼Œè·æ¥éª¨è¯åˆä¸Šç·£ä¸­é»3.5å¯¸ã€‚', function: 'å¥è„¾åŒ–æ¿•ï¼Œç†æ°£ã€‚', videoContext: 'èˆ‡æ°£æ²–ç©´é…åˆï¼Œæ”¹å–„é«”åŠ›ä¸ä½³åŠçš®è†šç™¢çš„å•é¡Œã€‚' },
            { id: 'gongsun', name: 'å…¬å­«ç©´', meridian: 'è„¾ç¶“', description: 'è¶³å…§å´ç·£ï¼Œç¬¬ä¸€è¹ éª¨åŸºåº•éƒ¨çš„å‰ä¸‹æ–¹ã€‚', function: 'å¥è„¾èƒƒï¼Œèª¿ç†è¡è„ˆã€‚', videoContext: 'è„¾ç¶“çµ¡ç©´ï¼Œå°æ–¼æ¶ˆåŒ–ç³»çµ±åŠæ ¸å¿ƒè‚Œç¾¤åŠ›é‡æœ‰å¹«åŠ©ã€‚' },
            { id: 'sanyinjiao', name: 'ä¸‰é™°äº¤', meridian: 'è„¾ã€è‚ã€è…ç¶“äº¤æœƒ', description: 'å°è…¿å…§å´ï¼Œè¶³å…§è¸å°–ä¸Š3å¯¸ï¼Œè„›éª¨å…§å´ç·£å¾Œæ–¹ã€‚', function: 'èª¿è£œè‚è…ï¼Œå¥è„¾åˆ©æ¿•ï¼Œå©¦ç§‘è¦ç©´ã€‚', videoContext: 'é‡è¦çš„ä¿å¥å¤§ç©´ï¼Œå»ºè­°æ¯æ—¥æŒ‰å£“æˆ–æ‹æ‰“ä»¥ç¶­æŒæ°£è¡€é€šæš¢ã€‚' },
            { id: 'yinlingquan', name: 'é™°é™µæ³‰', meridian: 'è„¾ç¶“', description: 'å°è…¿å…§å´ï¼Œè„›éª¨å…§å´é«å¾Œä¸‹æ–¹å‡¹é™·è™•ã€‚', function: 'é‹ä¸­ç„¦ï¼ŒåŒ–æ¿•æ»¯ã€‚', videoContext: 'èˆ‡æ°´åˆ†ä»£è¬æœ‰é—œï¼Œè½‰å½å‡¹é™·è™•ï¼ŒæŒ‰å£“æœ‰åŠ©æ–¼æ¶ˆé™¤æ°´è…«ã€‚' },
            { id: 'dabao', name: 'å¤§åŒ…ç©´', meridian: 'è„¾ç¶“ (è„¾ä¹‹å¤§çµ¡)', description: 'å´èƒ¸éƒ¨ï¼Œè…‹ä¸­ç·šä¸Šï¼Œç¬¬å…­è‚‹é–“éš™è™•ã€‚', function: 'çµ±é ˜ä¸€èº«ä¹‹æ°£è¡€ã€‚', videoContext: 'è‹¥å‘¼å¸çŸ­ä¿ƒã€æ°£ä¸åˆ°ä¸¹ç”°ï¼Œæˆ–å…¨èº«ç¼ºæ°§ï¼Œéœ€å¤šæŒ‰å£“æˆ–æ‹æ‰“æ­¤è™•ã€‚' }
        ];

        const DAILY_ROUTINE = [
            {
                time: 'Morning / Day',
                icon: <Sun className="w-6 h-6 text-amber-500" />,
                title: 'æ—¥é–“ä¿é¤Š',
                content: 'æ—©é¤è¦–å€‹äººä½œæ¯ã€‚æ¶ˆåŒ–ä¸ä½³è€…ï¼Œä¸­æ™šé¤éš¨é¤æœç”¨é†‹éŒ ã€‚'
            },
            {
                time: 'After Meal',
                icon: <Activity className="w-6 h-6 text-emerald-500" />,
                title: 'é¤å¾Œè¼”åŠ©',
                content: 'å¤§é¤å¾Œå¢åŠ é†‹éŒ åŠ‘é‡ã€‚èƒƒæ½°ç˜è€…é¤å‰å…ˆå–æº«è–‘èŒ¶æˆ–ç†±æ¹¯æš–èƒƒã€‚'
            },
            {
                time: 'Night (Pre-Sleep)',
                icon: <Moon className="w-6 h-6 text-indigo-500" />,
                title: 'ç¡å‰é¤Šè‚ (é—œéµ)',
                content: 'ç¡å‰ç©ºè…¹ï¼ˆé¤å¾Œ2å°æ™‚ä»¥ä¸Šï¼‰é£²ç”¨æª¸æª¬åŸæ±ã€‚é€™æ˜¯ã€Œé…¸å…¥è‚ã€çš„æœ€ä½³æ™‚åˆ»ï¼Œé€šçŸ¥è‚è‡Ÿä¼‘æ¯ã€‚'
            }
        ];

        const ACID_FOODS = [
            { name: 'æª¸æª¬', desc: 'å¯Œå«ç¶­Cï¼Œä¿ƒé€²è§£æ¯’èˆ‡è†½æ±åˆ†æ³Œ' },
            { name: 'é†‹', desc: 'ä¿ƒé€²æ–°é™³ä»£è¬ï¼Œå¹«åŠ©æ¶ˆåŒ–ï¼Œèª¿ç¯€é…¸é¹¼' },
            { name: 'å±±æ¥‚', desc: 'æ¶ˆé£ŸåŒ–ç©ï¼Œæ´»è¡€åŒ–ç˜€ï¼Œé™è¡€è„‚' },
            { name: 'æ©˜å­', desc: 'å«é¡é»ƒé…®ï¼Œå¢å¼·è§£æ¯’èƒ½åŠ›' },
            { name: 'è‘¡è„æŸš', desc: 'ä¿ƒé€²ä»£è¬æ’æ¯’ (éœ€æ³¨æ„è—¥ç‰©äº¤äº’ä½œç”¨)' },
            { name: 'é…¸æ¢…', desc: 'ç”Ÿæ´¥æ­¢æ¸´ï¼Œæ”¶æ–‚è‚æ°£ï¼Œæ”¹å–„é ­ç—›çœ©æšˆ' }
        ];

        const SYMPTOMS = [
            { name: 'é ­æšˆé ­ç—›', detail: 'è…¦éƒ¨ä¾›æ°§ä¸è¶³æˆ–è‚æ°£ä¸Šäº¢ã€‚æ”¹å–„ï¼šæŒ‰æ‘©å¤ªè¡ç©´ã€æ·±å‘¼å¸ã€‚' },
            { name: 'ç–²å‹ä¹åŠ›', detail: 'ç´°èƒç¼ºæ°§å°è‡´èƒ½é‡ä¸è¶³ã€‚æ”¹å–„ï¼šè¦å¾‹ä½œæ¯ã€è£œå……Bç¾¤ã€‚' },
            { name: 'è¨˜æ†¶è¡°é€€', detail: 'é•·æœŸç¼ºæ°§å½±éŸ¿ç¥ç¶“ã€‚æ”¹å–„ï¼šOmega-3ã€å……è¶³ç¡çœ ã€‚' },
            { name: 'å‘¼å¸å›°é›£', detail: 'è‚ºéƒ¨æ°§äº¤æ›æ•ˆç‡ä½ã€‚æ”¹å–„ï¼šå‘¼å¸è¨“ç·´ã€æœ‰æ°§é‹å‹•ã€‚' },
            { name: 'æ‰‹è…³å†°å†·', detail: 'æœ«æ¢¢å¾ªç’°ä¸è‰¯ã€‚æ”¹å–„ï¼šæŒ‰æ‘©ã€æº«æ°´æ³¡è…³ã€‚' },
            { name: 'èƒ¸æ‚¶å¿ƒæ‚¸', detail: 'ä¾›æ°§ä¸è¶³æˆ–æ°£é¬±ã€‚æ”¹å–„ï¼šæ‹æ‰“å¿ƒç¶“ã€æ·±å‘¼å¸ã€‚' }
        ];

        const TREATMENTS = [
            { title: 'é£²é£Ÿèª¿æ•´', desc: 'æ·±æµ·é­šé¡(Omega-3)ã€åå­—èŠ±ç§‘è”¬èœ(è§£æ¯’)ã€ç¶­ç”Ÿç´ E(æŠ—ç™¼ç‚)ã€‚' },
            { title: 'é‹å‹•ç™‚æ³•', desc: 'æ¯é€±3-5æ¬¡æœ‰æ°§é‹å‹•ï¼Œä¿ƒé€²å¾ªç’°ï¼Œæé«˜å«æ°§é‡ã€‚' },
            { title: 'ç©´ä½æŒ‰æ‘©', desc: 'é‡é»æŒ‰å£“è‚ä¿ã€è†½ä¿ã€è…ä¿ï¼Œæ¯ç©´6ç§’ï¼Œé‡è¤‡5æ¬¡ã€‚' },
            { title: 'ç‡Ÿé¤Šè£œå……', desc: 'å¥¶è–Šè‰(500mg)ã€ç¶­ç”Ÿç´ D3ã€ç¡’(200mcg)ã€TUDCAã€‚' },
            { title: 'å‘¼å¸èª¿ç¯€', desc: 'æ·±å‘¼å¸ç·´ç¿’ï¼šå¸4ç§’ã€å±4ç§’ã€å‘¼6ç§’ï¼Œæ¯å¤©10-15åˆ†é˜ã€‚' },
            { title: 'å§¿å‹¢çŸ¯æ­£', desc: 'ä¿æŒè„ŠèƒŒä¼¸å±•ï¼Œé¿å…è„Šæ¤èµ°ä½å°è‡´å™¨å®˜ç¼ºæ°§ã€‚' }
        ];

        // --- Components ---

        const SectionTitle = ({ icon, title }) => (
            <div className="flex items-center gap-2 mb-4 border-b-2 border-emerald-100 pb-2">
                {icon}
                <h2 className="text-xl font-bold text-emerald-800">{title}</h2>
            </div>
        );

        const Card = ({ children, className = "", onClick }) => (
            <div onClick={onClick} className={`bg-white rounded-xl shadow-sm border border-stone-200 p-6 hover:shadow-md transition-all duration-300 ${className} ${onClick ? 'cursor-pointer' : ''}`}>
                {children}
            </div>
        );

        const DosageCalculator = () => {
            const [weight, setWeight] = useState('');
            const [mealType, setMealType] = useState('normal');
            const [digestion, setDigestion] = useState('normal');
            const [result, setResult] = useState(null);

            useEffect(() => {
                if (!weight) {
                    setResult(null);
                    return;
                }
                let baseDose = 0;
                const w = parseFloat(weight);
                if (w < 50) baseDose = 3;
                else if (w >= 50 && w < 60) baseDose = 4;
                else if (w >= 60) baseDose = 5;

                let finalDose = baseDose;
                let message = "";

                if (mealType === 'heavy') {
                    finalDose = 8;
                    message = "åƒå¤§é¤æ™‚å»ºè­°å¢åŠ åŠ‘é‡ä»¥åŠ©æ¶ˆåŒ–ã€‚";
                }
                if (digestion === 'bad') {
                    message += " æ¶ˆåŒ–è¼ƒå·®æˆ–é«”å‹è¼ƒå£¯ç¢©è€…ï¼Œå»ºè­°æ¯å¤©è¦å¾‹é£Ÿç”¨ã€‚";
                } else {
                    message += " æ¶ˆåŒ–æ­£å¸¸è€…å¯å¶çˆ¾é£Ÿç”¨æˆ–éš¨å¤§é¤é£Ÿç”¨ã€‚";
                }
                setResult({ dose: finalDose, note: message });
            }, [weight, mealType, digestion]);

            return (
                <Card className="bg-emerald-50/50">
                    <SectionTitle icon={<Calculator className="w-5 h-5 text-emerald-600" />} title="é†‹éŒ åŠ‘é‡è¨ˆç®—å™¨" />
                    <div className="space-y-4">
                        <div>
                            <label className="block text-sm font-medium text-stone-600 mb-1">é«”é‡ (å…¬æ–¤)</label>
                            <input type="number" value={weight} onChange={(e) => setWeight(e.target.value)} placeholder="ä¾‹å¦‚: 55" className="w-full p-2 border border-stone-300 rounded-md focus:ring-2 focus:ring-emerald-400 outline-none transition" />
                        </div>
                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-sm font-medium text-stone-600 mb-1">ç”¨é¤é¡å‹</label>
                                <select value={mealType} onChange={(e) => setMealType(e.target.value)} className="w-full p-2 border border-stone-300 rounded-md outline-none">
                                    <option value="normal">ä¸€èˆ¬ç”¨é¤</option>
                                    <option value="heavy">å¤§é¤/åƒåˆ°é£½</option>
                                </select>
                            </div>
                            <div>
                                <label className="block text-sm font-medium text-stone-600 mb-1">æ¶ˆåŒ–ç‹€æ³</label>
                                <select value={digestion} onChange={(e) => setDigestion(e.target.value)} className="w-full p-2 border border-stone-300 rounded-md outline-none">
                                    <option value="normal">æ­£å¸¸</option>
                                    <option value="bad">å®¹æ˜“è„¹æ°£/æ¶ˆåŒ–å·®</option>
                                </select>
                            </div>
                        </div>
                        {result && (
                            <div className="mt-4 p-4 bg-emerald-100 rounded-lg border border-emerald-200 animate-fade-in">
                                <div className="flex items-baseline gap-2">
                                    <span className="text-sm text-emerald-800">å»ºè­°:</span>
                                    <span className="text-3xl font-bold text-emerald-600">{result.dose}</span>
                                    <span className="text-sm text-emerald-800">é¡†</span>
                                </div>
                                {result.note && <p className="text-xs text-emerald-700 mt-2">{result.note}</p>}
                            </div>
                        )}
                    </div>
                </Card>
            );
        };

        const AcupointMap = () => {
            const [selectedPoint, setSelectedPoint] = useState(ACUPOINTS[0]); // Default select first

            return (
                <Card className="col-span-1 lg:col-span-2">
                    <SectionTitle icon={<MapPin className="w-5 h-5 text-emerald-600" />} title="ç¶“çµ¡ç©´ä½äº’å‹•å°è¦½" />
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div className="md:col-span-1 space-y-2 h-80 overflow-y-auto pr-2 custom-scrollbar">
                            {ACUPOINTS.map((point) => (
                                <button
                                    key={point.id}
                                    onClick={() => setSelectedPoint(point)}
                                    className={`w-full text-left p-3 rounded-lg text-sm transition-all duration-200 flex justify-between items-center ${
                                        selectedPoint?.id === point.id
                                            ? 'bg-emerald-600 text-white shadow-md transform scale-105'
                                            : 'bg-stone-100 text-stone-600 hover:bg-emerald-100'
                                    }`}
                                >
                                    <span>{point.name}</span>
                                    {selectedPoint?.id === point.id && <Activity className="w-4 h-4" />}
                                </button>
                            ))}
                        </div>
                        <div className="md:col-span-2 bg-stone-50 rounded-lg p-6 border border-stone-200 min-h-[300px] flex flex-col justify-center relative overflow-hidden">
                            {selectedPoint ? (
                                <div className="animate-fade-in z-10">
                                    <h3 className="text-2xl font-bold text-emerald-800 mb-1">{selectedPoint.name}</h3>
                                    <span className="inline-block px-2 py-1 bg-sky-100 text-sky-700 text-xs rounded-full mb-4 font-medium">
                                        {selectedPoint.meridian}
                                    </span>
                                    <div className="space-y-4">
                                        <div>
                                            <h4 className="text-sm font-bold text-stone-500 uppercase tracking-wide">ä½ç½®</h4>
                                            <p className="text-stone-800">{selectedPoint.description}</p>
                                        </div>
                                        <div>
                                            <h4 className="text-sm font-bold text-stone-500 uppercase tracking-wide">åŠŸæ•ˆ</h4>
                                            <p className="text-stone-800">{selectedPoint.function}</p>
                                        </div>
                                        <div className="bg-amber-50 p-3 rounded-md border-l-4 border-amber-400">
                                            <h4 className="text-xs font-bold text-amber-600 mb-1">èª²ç¨‹é‡é»</h4>
                                            <p className="text-sm text-amber-900 italic">"{selectedPoint.videoContext}"</p>
                                        </div>
                                    </div>
                                </div>
                            ) : (
                                <div className="text-center text-stone-400">è«‹é»é¸å·¦å´åˆ—è¡¨æŸ¥çœ‹ç©´ä½è©³æƒ…</div>
                            )}
                        </div>
                    </div>
                </Card>
            );
        };

        const RoutineTimeline = () => (
            <Card>
                <SectionTitle icon={<Activity className="w-5 h-5 text-emerald-600" />} title="æ¯æ—¥é¤Šç”Ÿæ™‚åˆ»è¡¨" />
                <div className="relative border-l-2 border-emerald-100 ml-3 space-y-8 pl-6 py-2">
                    {DAILY_ROUTINE.map((item, index) => (
                        <div key={index} className="relative group">
                            <div className="absolute -left-[35px] bg-white border-2 border-emerald-200 rounded-full p-1 group-hover:scale-110 transition-transform duration-300">
                                {item.icon}
                            </div>
                            <div>
                                <span className="text-xs font-semibold text-emerald-500 uppercase tracking-wider">{item.time}</span>
                                <h3 className="text-lg font-bold text-stone-800 mt-1 mb-2">{item.title}</h3>
                                <p className="text-stone-600 text-sm leading-relaxed">{item.content}</p>
                            </div>
                        </div>
                    ))}
                </div>
            </Card>
        );

        const FoodGrid = () => {
            const [activeFood, setActiveFood] = useState(null);
            return (
                <Card className="col-span-1 lg:col-span-2 border-l-4 border-l-lime-500">
                    <SectionTitle icon={<Leaf className="w-5 h-5 text-lime-600" />} title="é…¸å‘³é£Ÿç‰©åœ–é‘‘ (é»æ“ŠæŸ¥çœ‹åŠŸæ•ˆ)" />
                    <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mb-4">
                        {ACID_FOODS.map((food) => (
                            <button 
                                key={food.name}
                                onClick={() => setActiveFood(activeFood === food ? null : food)}
                                className={`p-3 rounded-lg text-center transition-all ${activeFood === food ? 'bg-lime-600 text-white shadow-inner' : 'bg-lime-50 text-lime-800 hover:bg-lime-100'}`}
                            >
                                <div className="font-bold">{food.name}</div>
                            </button>
                        ))}
                    </div>
                    {activeFood && (
                        <div className="bg-lime-50 p-4 rounded-lg border border-lime-200 animate-fade-in">
                            <strong className="text-lime-800">{activeFood.name}ï¼š</strong>
                            <span className="text-stone-700">{activeFood.desc}</span>
                        </div>
                    )}
                    {!activeFood && <p className="text-xs text-stone-400 text-center">é»é¸ä¸Šæ–¹é£Ÿç‰©å¯æŸ¥çœ‹å°è‚è‡Ÿçš„å…·é«”å¹«åŠ©ã€‚</p>}
                </Card>
            );
        };

        const SymptomChecker = () => {
            const [activeSymptom, setActiveSymptom] = useState(null);
            return (
                <Card className="border-l-4 border-l-orange-400">
                    <SectionTitle icon={<AlertCircle className="w-5 h-5 text-orange-600" />} title="ç¼ºæ°§ç—‡ç‹€æª¢æ¸¬" />
                    <div className="flex flex-wrap gap-2 mb-4">
                        {SYMPTOMS.map((sym) => (
                            <button
                                key={sym.name}
                                onClick={() => setActiveSymptom(activeSymptom === sym ? null : sym)}
                                className={`px-3 py-1.5 rounded-full text-sm transition-all ${activeSymptom === sym ? 'bg-orange-500 text-white' : 'bg-orange-100 text-orange-800 hover:bg-orange-200'}`}
                            >
                                {sym.name}
                            </button>
                        ))}
                    </div>
                    {activeSymptom ? (
                        <div className="bg-orange-50 p-3 rounded-lg border border-orange-200 animate-fade-in text-sm">
                            <strong className="text-orange-800">{activeSymptom.name}ï¼š</strong>
                            <p className="text-stone-700 mt-1">{activeSymptom.detail}</p>
                        </div>
                    ) : (
                        <p className="text-xs text-stone-400">è‹¥å‡ºç¾ä»¥ä¸Šç—‡ç‹€ï¼Œå¯èƒ½ç‚ºç¼ºæ°§ç´°èƒç—‡å€™ç¾¤è­¦è¨Šã€‚</p>
                    )}
                </Card>
            );
        };

        const NaturalTherapyCard = () => (
            <Card className="bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-100">
                <SectionTitle icon={<BookOpen className="w-5 h-5 text-blue-600" />} title="è‡ªç„¶ç™‚æ³•èˆ‡ç‡Ÿé¤Šè£œå……" />
                <div className="space-y-4 text-sm">
                    <div className="bg-white/60 p-3 rounded-lg">
                        <h4 className="font-bold text-blue-800 mb-2">ğŸŒ± é—œéµç‡Ÿé¤Šè£œå……</h4>
                        <ul className="list-disc list-inside space-y-1 text-stone-700">
                            <li><strong>å¥¶è–Šè‰ï¼š</strong>æ¯å¤© 500mg (ä¿è­·è‚ç´°èƒ)</li>
                            <li><strong>ç¶­ç”Ÿç´ D3ï¼š</strong>æ¯å¤© 10,000-20,000 IU</li>
                            <li><strong>ç¡’ (Selenium)ï¼š</strong>æ¯å¤© 200mcg (æŠ—æ°§åŒ–)</li>
                            <li><strong>TUDCAï¼š</strong>æ—©æ™šç©ºè…¹å„å…©ç²’</li>
                        </ul>
                    </div>
                    <div className="bg-white/60 p-3 rounded-lg">
                         <h4 className="font-bold text-indigo-800 mb-2">ğŸ§˜ ç”Ÿæ´»èª¿æ•´</h4>
                         <ul className="list-disc list-inside space-y-1 text-stone-700">
                            <li><strong>æ–·é£Ÿï¼š</strong>å»ºè­°æ¯å¤©è‡³å°‘ 18 å°æ™‚</li>
                            <li><strong>å‘¼å¸ç·´ç¿’ï¼š</strong>å¸4ç§’ï¼Œå±4ç§’ï¼Œå‘¼6ç§’ (æ¯æ—¥15åˆ†)</li>
                            <li><strong>å§¿å‹¢çŸ¯æ­£ï¼š</strong>é¿å…è„Šæ¤èµ°ä½å°è‡´å™¨å®˜ç¼ºæ°§</li>
                         </ul>
                    </div>
                </div>
            </Card>
        );

        const App = () => {
            const [isFullScreen, setIsFullScreen] = useState(false);
            const [liverHealth, setLiverHealth] = useState(0);
            const appRef = useRef(null);

            useEffect(() => {
                // Simulate loading progress for visual effect from original file
                setTimeout(() => setLiverHealth(85), 500);
            }, []);

            const toggleFullScreen = () => {
                if (!document.fullscreenElement) {
                    try {
                        if (appRef.current.requestFullscreen) appRef.current.requestFullscreen();
                        else if (appRef.current.webkitRequestFullscreen) appRef.current.webkitRequestFullscreen();
                    } catch (err) { console.warn("Fullscreen blocked", err); }
                } else {
                    if (document.exitFullscreen) document.exitFullscreen();
                }
            };

            useEffect(() => {
                const handleFSChange = () => setIsFullScreen(!!document.fullscreenElement);
                document.addEventListener('fullscreenchange', handleFSChange);
                return () => document.removeEventListener('fullscreenchange', handleFSChange);
            }, []);

            return (
                <div ref={appRef} className={`min-h-screen bg-stone-50 font-sans text-stone-800 transition-all duration-500 ${isFullScreen ? 'p-8 overflow-y-auto' : 'p-4 md:p-8'}`}>
                    {/* --- Header --- */}
                    <header className="max-w-7xl mx-auto mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4 animate-slide-down">
                        <div>
                            <div className="flex items-center gap-3">
                                <div className="bg-emerald-600 text-white p-2 rounded-lg shadow-lg shadow-emerald-200">
                                    <Activity className="w-6 h-6" />
                                </div>
                                <h1 className="text-2xl md:text-3xl font-bold text-emerald-950 tracking-tight">
                                    æ—ç¾å¿ç”Ÿå‘½æ•™è‚²ç¶“çµ¡å­¸ <span className="hidden md:inline mx-2 text-emerald-300">|</span> <span className="text-emerald-700 text-xl font-normal">äº’å‹•å¼å¥åº·å„€è¡¨æ¿</span>
                                </h1>
                            </div>
                            <p className="text-stone-500 mt-1 ml-1 text-sm">åŸºæ–¼èª²ç¨‹å½±ç‰‡èˆ‡è£œå……æ•™æçš„æ™ºæ…§å°è¦½ç³»çµ±</p>
                        </div>
                        <div className="flex items-center gap-3 self-end md:self-auto">
                            <span className="px-3 py-1 bg-stone-200 text-stone-600 text-xs font-mono rounded-full">v{VERSION}</span>
                            <button onClick={toggleFullScreen} className="flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-lg hover:bg-emerald-50 text-stone-600 hover:text-emerald-600 transition-colors shadow-sm">
                                {isFullScreen ? <Minimize className="w-4 h-4" /> : <Maximize className="w-4 h-4" />}
                                <span className="text-sm font-medium hidden sm:inline">{isFullScreen ? 'é€€å‡ºå…¨è¢å¹•' : 'å…¨è¢å¹•æ¨¡å¼'}</span>
                            </button>
                        </div>
                    </header>

                    {/* --- Main Content Grid --- */}
                    <main className="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-3 gap-6">
                        
                        {/* Left Column */}
                        <div className="lg:col-span-2 space-y-6">
                            {/* Video Player Cover */}
                            <div className="space-y-2">
                                <div onClick={() => window.open(VIDEO_URL, '_blank')} className="bg-black rounded-xl overflow-hidden shadow-xl aspect-video relative group z-10 cursor-pointer border border-stone-800" title="é»æ“Šé–‹å•Ÿ YouTube æ’­æ”¾">
                                    <img src={VIDEO_THUMBNAIL} alt="Video Thumbnail" className="w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity duration-300 group-hover:scale-105 transform transition-transform" />
                                    <div className="absolute inset-0 flex items-center justify-center">
                                        <div className="w-16 h-16 bg-red-600/90 rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 group-hover:bg-red-600 transition-all duration-300 backdrop-blur-sm">
                                             <PlaySolid className="w-8 h-8 text-white ml-1" />
                                        </div>
                                    </div>
                                    <div className="absolute bottom-3 right-3 bg-black/70 backdrop-blur-md text-white text-xs font-medium px-3 py-1.5 rounded-full flex items-center gap-1.5 border border-white/10">
                                        <ExternalLink className="w-3 h-3" /> é»æ“Šå‰å¾€ YouTube è§€çœ‹
                                    </div>
                                </div>
                                <p className="text-xs text-stone-400 text-center">è¨»ï¼šå› ç‰ˆæ¬Šè¨­å®šé™åˆ¶åµŒå…¥ï¼Œé»æ“Šä¸Šæ–¹å°é¢å°‡é–‹å•Ÿ YouTube è¦–çª—æ’­æ”¾ã€‚</p>
                            </div>

                            {/* Concept Cards (Rich Text from Uploaded File) */}
                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <Card className="border-l-4 border-l-sky-400">
                                    <SectionTitle icon={<BookOpen className="w-5 h-5 text-sky-600" />} title="é…¸å…¥è‚ç†è«–è©³è§£" />
                                    <p className="text-sm text-stone-600 leading-relaxed mb-2">
                                        ä¸­é†«ã€Œäº”å‘³å…¥äº”è‡Ÿã€å­¸èªªä¸­ï¼Œé…¸å‘³å°è‚è‡Ÿæœ‰ç‰¹æ®Šè¦ªå’ŒåŠ›ã€‚<strong>å…¶ä½œç”¨ç‚ºã€Œæ”¶æ–‚ã€éåº¦æ—ºç››çš„é™½æ°£</strong>ï¼Œç‰¹åˆ¥é©åˆé«˜è¡€å£“ã€æƒ…ç·’ç«çˆ†è€…ã€‚
                                    </p>
                                    <p className="text-sm text-stone-600 leading-relaxed">
                                        é…¸å‘³äº¦å¯è§£é…’ï¼Œä¸¦ä¿ƒé€²è†½æ±èˆ‡èƒ°è‡Ÿæ¶ˆåŒ–æ¶²åˆ†æ³Œï¼Œå¹«åŠ©é£Ÿç‰©åˆ†è§£ã€‚
                                    </p>
                                </Card>
                                <Card className="border-l-4 border-l-rose-400">
                                    <SectionTitle icon={<Activity className="w-5 h-5 text-rose-600" />} title="è‚ç´°èƒç™¼ç‚é€†è½‰" />
                                    <p className="text-sm text-stone-600 leading-relaxed mb-3">
                                        é’è‰²é£Ÿç‰©å°æ‡‰è‚è‡Ÿï¼Œå¯è§£é…’ç²¾èˆ‡æ¯’ç´ ã€‚é©ç•¶æ–·é£Ÿèˆ‡ç‡Ÿé¤Šè£œå……å¯ä¿ƒé€²è‚ç´°èƒå†ç”Ÿã€‚
                                    </p>
                                    <div className="bg-stone-100 rounded-full h-2.5 mb-1 overflow-hidden border border-stone-200">
                                        <div className="bg-gradient-to-r from-emerald-400 to-emerald-600 h-2.5 rounded-full progress-fill shadow-sm" style={{ width: `${liverHealth}%` }}></div>
                                    </div>
                                    <div className="flex justify-between text-xs text-stone-500">
                                        <span>ç™¼ç‚æŒ‡æ•¸ç›£æ§</span>
                                        <span>å¥åº·ç›®æ¨™: 100%</span>
                                    </div>
                                </Card>
                            </div>

                            {/* Interactive Map (Merged Data) */}
                            <AcupointMap />

                            {/* Food Grid (New) */}
                            <FoodGrid />
                        </div>

                        {/* Right Column */}
                        <div className="space-y-6">
                            {/* Dosage Calculator */}
                            <DosageCalculator />

                            {/* Symptom Checker (New) */}
                            <SymptomChecker />

                            {/* Natural Therapy (New) */}
                            <NaturalTherapyCard />

                            {/* Routine */}
                            <RoutineTimeline />

                            {/* Tips */}
                            <Card className="bg-gradient-to-br from-emerald-600 to-teal-700 text-white border-none">
                                <h3 className="font-bold text-lg mb-3 flex items-center gap-2">
                                    <PlayCircle className="w-5 h-5" /> é‡è¦æé†’
                                </h3>
                                <ul className="space-y-3 text-sm text-emerald-50 opacity-90">
                                    <li className="flex items-start gap-2">
                                        <span className="mt-1 w-1.5 h-1.5 bg-emerald-300 rounded-full flex-shrink-0"></span>
                                        <span>è„Šæ¤èµ°ä½æœƒå°è‡´å™¨å®˜ç¼ºæ°§è€Œé€€åŒ–ï¼Œè«‹ä¿æŒå§¿å‹¢ç«¯æ­£ã€‚</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <span className="mt-1 w-1.5 h-1.5 bg-emerald-300 rounded-full flex-shrink-0"></span>
                                        <span>é©ç•¶è‡¥åºŠä¼‘æ¯å¯æ¸›è¼•è‚è‡Ÿè² æ“”ï¼Œä¿ƒé€²è‚ç´°èƒå†ç”Ÿã€‚</span>
                                    </li>
                                    <li className="flex items-start gap-2">
                                        <span className="mt-1 w-1.5 h-1.5 bg-emerald-300 rounded-full flex-shrink-0"></span>
                                        <span>ç¡å‰æª¸æª¬æ±æ˜¯ã€Œé€šçŸ¥ã€è‚è‡Ÿä¼‘æ¯çš„é—œéµä¿¡è™Ÿã€‚</span>
                                    </li>
                                </ul>
                            </Card>
                        </div>
                    </main>

                    {/* --- Footer --- */}
                    <footer className="max-w-7xl mx-auto mt-12 pt-6 border-t border-stone-200 text-center text-stone-400 text-xs pb-8">
                        <p>Â© 2025 Interactive Health Dashboard v{VERSION}. Generated based on video content & supplementary materials.</p>
                        <p className="mt-2">å…è²¬è²æ˜ï¼šæœ¬ç¶²é åƒ…ä¾›è³‡è¨Šåƒè€ƒï¼Œéé†«ç™‚å»ºè­°ã€‚è‹¥æœ‰èº«é«”ä¸é©ï¼Œè«‹è«®è©¢å°ˆæ¥­é†«å¸«ã€‚</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>